////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//!
//!  \file      app_speedRun_StateMachines.h
//!  \brief    
//!  \details
//!
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#pragma once

// Includes ------------------------------------------------------------------------------------------------------------
// Defines -------------------------------------------------------------------------------------------------------------

#define SRUN_FOLLOW_DISTANCE			40			//!< cm TODO determine

#define SRUN_START_GATE_DISTANCE		15			//!< cm TODO measure

#define SRUN_OVERTAKE_SEGMENT			8
#define SRUN_OVERTAKE_TURN_TIME 		400 		//!< 400 * task period (5ms) = 2s
#define SRUN_OVERTAKE_PASS_TIME			2000		//!< 2000* 5ms = 10s
#define SRUN_OVERTAKE_FIND_TIME			800			//!< 800 * 5ms = 4s
#define SRUN_OVERTAKE_SPEED_SLOW		15			//!< %
#define SRUN_OVERTAKE_SPEED_FAST		35			//!< %
#define SRUN_OVERTAKE_SERVO_ANGLE		20*PI/180	//!< rad

// Typedefs ------------------------------------------------------------------------------------------------------------
// Variables -----------------------------------------------------------------------------------------------------------
// Function prototypes -------------------------------------------------------------------------------------------------

//**********************************************************************************************************************
//! Initializes all of the state machines.
//!
//! @return -
//**********************************************************************************************************************
void sRunInitStateMachines (void);

//**********************************************************************************************************************
//! State machine that manages the lap and holds the driving strategies.
//!
//! @return -
//**********************************************************************************************************************
void sRunMainStateMachine (void);

//**********************************************************************************************************************
//! This state machine is responsible for how the car act at the specific segments of the lap.
//!
//! @return -
//**********************************************************************************************************************
void sRunDriveStateMachine (void);

//**********************************************************************************************************************
//! State machine for the overtaking maneuver.
//!
//! TODO parameters
//!
//! @return -
//**********************************************************************************************************************
void sRunOvertakeStateMachine (void);

//**********************************************************************************************************************
//!
//!
//! @return -
//**********************************************************************************************************************
void sRunParadeLapAlgorithm	(void);

//**********************************************************************************************************************
//!	Line follow PD controller.
//!
//! @return -
//**********************************************************************************************************************
void sRunCntrLineFollow (void);
