////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//!
//!  \file      radio.c
//!  \brief
//!  \details
//!
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Includes ------------------------------------------------------------------------------------------------------------

#include <start.h>
#include "usart.h"
#include "../../3_BSP/Inc/bsp_uart.h"

// Defines -------------------------------------------------------------------------------------------------------------

// Typedefs ------------------------------------------------------------------------------------------------------------

// Local (static) & extern variables -----------------------------------------------------------------------------------

static StartSignal state = sNothing;
static uint8_t message;

// Local (static) function prototypes ----------------------------------------------------------------------------------

// Global function definitions -----------------------------------------------------------------------------------------

// Local (static) function definitions ---------------------------------------------------------------------------------

void startInit()
{
	bspUartReceive_IT(Uart_Radio, &message, 1);
}

StartSignal startGetState()
{
    return state;
}

void bspRadioRxCpltCallback()
{
	bspUartReceive_IT(Uart_Radio, &message, 1);

    if (message >= '0' && message <= '5')
    {
        state = message - '0';
    }
    else
    {
        state = sError;
    }
}
