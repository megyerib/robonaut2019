////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//!
//!  \file      controller.c
//!  \brief
//!  \details
//!
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Includes ------------------------------------------------------------------------------------------------------------

#include "controller.h"

// Defines -------------------------------------------------------------------------------------------------------------
// Typedefs ------------------------------------------------------------------------------------------------------------
// Local (static) & extern variables -----------------------------------------------------------------------------------
// Local (static) function prototypes ----------------------------------------------------------------------------------
// Global function definitions -----------------------------------------------------------------------------------------

//! @param tf
//! @param an
//! @return
//!
//! @example
double controllerTransferFunction (cFirstOrderTF* tf, double an)
{
	double bn;

	bn = tf->b0 * an + tf->b1 * tf->an_past - tf->a1 * tf->bn_past;

	tf->bn_past = bn;
	tf->an_past = an;

	return bn;
}

void controllerPdConfigure (cFirstOrderTF* const tf, const double Kp, const double Td, const double T)
{
	tf->a1 = T;
	tf->b0 = Kp;
	tf->b1 = Kp*Td;
}

// Local (static) function definitions ---------------------------------------------------------------------------------
